# Changelog - יומן שינויים

כל השינויים בפרויקט DiyurCalc מתועדים כאן.

פורמט: [SemVer](https://semver.org/)

---

## [2.0.17] - 2026-01-22

### שינויים
- ימי עבודה (קוד 767) כוללים עכשיו גם ימי מחלה וחופשה
- קבצים: `app_utils.py`

### סיבה
ימי עבודה צריכים לכלול את כל הימים שבהם העובד נחשב כ"עובד" - כולל מחלה וחופשה

---

## [2.0.16] - 2026-01-22

### שינויים
- קוד 199 (סה"כ שעות) מוצג בתצוגה המקדימה של ייצוא שכר
- קוד 199 לא ייוצא לקובץ גשר (.mrv) - נשאר אינפורמטיבי בלבד
- קבצים: `services/gesher_exporter.py`

### סיבה
קוד 199 הוא מידע אינפורמטיבי (סה"כ שעות) שצריך להיות מוצג בתצוגה המקדימה
אך לא לייצא לקובץ גשר כי מירב לא צריכה אותו.

---

## [2.0.15] - 2026-01-22

### שינויים
- תיקון: שורת ימי מחלה מוצגת בסיכום החודשי גם כשיום ראשון של מחלה (ללא תשלום)
- הכמות מוצגת (שעות וימים), הסכום מוצג 0
- קבצים: `templates/guide.html`

### סיבה
כשיש רק יום מחלה ראשון (שלא משלמים עליו), השורה לא הופיעה בכלל בסיכום.
עכשיו השורה מופיעה עם הכמות והסכום 0.

---

## [2.0.14] - 2026-01-22

### שינויים
- תיקון באג: סה"כ לתשלום מחושב עם עיגול בכל הפרויקט
- חישוב `rounded_total` ב-Python (app_utils.py) - מקור אמת יחיד
- כל השורות מחושבות: שעות מעוגלות × תעריף = סה"כ
- סכום השורות = סה"כ לתשלום בדיוק
- סה"כ מוצג עם 2 ספרות אחרי הנקודה (לדוגמה: 16,035.33)
- הוספת עמודת מחלה (sick_payment) לדף סיכום שכר כללי
- קבצים: `app_utils.py`, `core/logic.py`, `templates/guide.html`, `templates/general_summary.html`

### סיבה
הבאג: סכום השורות לא התאים לסה"כ לתשלום כי חלק מהשורות השתמשו בערכים אמיתיים
וחלק בערכים מעוגלים. עכשיו הכל עם עיגול - סכום השורות = סה"כ בדיוק.

---

## [2.0.13] - 2026-01-22

### שינויים
- הסכום בטבלת ייצוא שכר מחושב לפי שעות מעוגלות - **תואם למה שמירב תשלם בפועל**
- טבלה עם 5 עמודות: תיאור רכיב, קוד מירב, כמות (שעות), תעריף, סה"כ לתשלום
- קבצים: `templates/guide.html`

### סיבה
עקביות עם מערכת מירב - קובץ גשר שולח שעות מעוגלות (2 ספרות),
ומירב מחשבת: שעות × תעריף = סכום. עכשיו guide.html מציג את אותו סכום

---

## [2.0.12] - 2026-01-22

### שינויים
- תיקון באג: דיווחי שעת עבודה בשעות לילה (00:00-08:00) לא הופיעו בחודש הנכון
- דיווח עצמאי שמתחיל אחרי חצות (כמו 02:00-06:30) נשאר ביום שבו דווח
- רק משמרות שהתחילו לפני חצות והמשיכו ללילה משויכות ליום הקודם
- קבצים: `app_utils.py`

### סיבה
דיווח 02:00-06:30 מיום 01/01 היה משויך ליום 31/12 ונעלם מחודש ינואר

---

## [2.0.11] - 2026-01-22

### שינויים
- תיקון באג: כוננות מבוטלת שמתחילה בחצות (00:00) לא הוצגה בדוח
- הסרת תנאי מיותר שמנע הצגת כוננויות מבוטלות בשעות מסוימות
- קבצים: `app_utils.py`

### סיבה
כוננויות שהתבטלו בגלל חפיפה (כמו 22:00-00:00) לא הופיעו בדוח - עכשיו הן מופיעות עם הסיבה לביטול

---

## [2.0.10] - 2026-01-22

### שינויים
- כוננות חלקית בגלל יציאה מוקדמת - תשלום כשעות עבודה במקום תעריף כוננות קבוע
- אם העובד יצא לפני סיום הכוננות המוגדרת (ולא בגלל עבודה), השעות ממשיכות את הרצף
- תעריף שבת/חול נקבע לפי הזמן בפועל (מעבר משבת לחול משנה תעריף)
- קבצים: `app_utils.py`, `tests/test_salary_calculation.py`

### סיבה
כלל עסקי חדש - כוננות חלקית בגלל יציאה מוקדמת צריכה להיות משולמת כשעות עבודה

---

## [2.0.9] - 2026-01-22

### גרסה התחלתית
- תחילת תיעוד שינויים אוטומטי
- גרסה נוכחית של הפרויקט: 2.09

---
